{% extends 'base.html' %}
{% block content %}
<div class="ml-0 lg:ml-64 transition-all duration-200">
  <!-- Topbar -->
  <header class="sticky top-0 z-30 h-16 flex items-center gap-3 bg-white/80 backdrop-blur border-b border-gray-200 px-4 dark:bg-gray-900/60 dark:border-gray-800">
    <button id="openSidebar" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">
      <i data-lucide="menu" class="w-5 h-5"></i>
    </button>
    <div class="relative max-w-xl w-full">
      <input type="text" placeholder="Search transactions, categories..." class="w-full ps-10 pe-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border border-transparent focus:border-primary-300 dark:focus:border-primary-700 outline-none" />
      <i data-lucide="search" class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"></i>
    </div>
    <div class="ml-auto flex items-center gap-2">
      <button id="themeToggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" title="Toggle theme">
        <i data-lucide="sun" class="w-5 h-5 block dark:hidden"></i>
        <i data-lucide="moon" class="w-5 h-5 hidden dark:block"></i>
      </button>
      <button id="addExpenseBtn" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-primary-600 hover:bg-primary-700 text-white shadow-soft">
        <i data-lucide="plus" class="w-5 h-5"></i>
        <span>Add Expense</span>
      </button>
    </div>
  </header>

  <!-- Content -->
  <main class="p-4 sm:p-6 space-y-6 min-h-screen">
    <!-- Summary Cards -->
    <section class="grid sm:grid-cols-2 xl:grid-cols-4 gap-4">
      <div class="p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Total Spent</span>
          <i data-lucide="wallet" class="w-5 h-5 text-primary-600"></i>
        </div>
        <p class="mt-3 text-2xl font-semibold">$2,845.21</p>
        <p class="text-xs text-gray-500 mt-1">+8.4% vs last month</p>
      </div>
      <div class="p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">This Month</span>
          <i data-lucide="calendar" class="w-5 h-5 text-primary-600"></i>
        </div>
        <p class="mt-3 text-2xl font-semibold">$764.80</p>
        <div class="mt-3">
          <div class="h-2 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden">
            <div class="h-full w-2/3 bg-primary-500"></div>
          </div>
          <p class="text-xs text-gray-500 mt-1">67% of $1,150 budget</p>
        </div>
      </div>
      <div class="p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Top Category</span>
          <i data-lucide="shopping-bag" class="w-5 h-5 text-primary-600"></i>
        </div>
        <p class="mt-3 text-2xl font-semibold">Groceries</p>
        <p class="text-xs text-gray-500 mt-1">$245.30 â€¢ 12 txns</p>
      </div>
      <div class="p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Recurring</span>
          <i data-lucide="refresh-cw" class="w-5 h-5 text-primary-600"></i>
        </div>
        <p class="mt-3 text-2xl font-semibold">$129.99</p>
        <p class="text-xs text-gray-500 mt-1">3 subscriptions</p>
      </div>
    </section>

    <!-- Charts & Breakdown -->
    <section class="grid lg:grid-cols-3 gap-4">
      <div class="lg:col-span-2 p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
        <div class="flex items-center justify-between">
          <h2 class="font-semibold">Spending (Last 6 Months)</h2>
          <div class="flex items-center gap-2 text-sm">
            <button class="px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800">Monthly</button>
            <button class="px-3 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">Weekly</button>
          </div>
        </div>
        <div class="mt-4">
          <canvas id="spendChart" class="w-full h-64"></canvas>
        </div>
      </div>
      <div class="p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
        <h2 class="font-semibold">Category Breakdown</h2>
        <ul class="mt-4 space-y-3">
          <li class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <span class="size-3 rounded-full bg-primary-500 inline-block"></span>
              <span>Groceries</span>
            </div>
            <span class="font-medium">$245</span>
          </li>
          <li class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <span class="size-3 rounded-full bg-green-500 inline-block"></span>
              <span>Transport</span>
            </div>
            <span class="font-medium">$152</span>
          </li>
          <li class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <span class="size-3 rounded-full bg-amber-500 inline-block"></span>
              <span>Eating Out</span>
            </div>
            <span class="font-medium">$120</span>
          </li>
          <li class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <span class="size-3 rounded-full bg-pink-500 inline-block"></span>
              <span>Entertainment</span>
            </div>
            <span class="font-medium">$95</span>
          </li>
        </ul>
        <div class="mt-6">
          <div class="h-2 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden">
            <div class="h-full w-3/4 bg-primary-500"></div>
          </div>
          <p class="text-xs text-gray-500 mt-1">75% of monthly limit</p>
        </div>
      </div>
    </section>

    <!-- Transactions Table -->
    <section class="p-4 rounded-2xl bg-white border border-gray-200 shadow-soft dark:bg-gray-900/60 dark:border-gray-800">
      <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:justify-between">
        <h2 class="font-semibold">Recent Transactions</h2>
        <div class="flex items-center gap-2">
          <select class="px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800">
            <option>All</option>
            <option>Income</option>
            <option>Expense</option>
          </select>
          <select class="px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800">
            <option>Last 30 days</option>
            <option>Last 7 days</option>
            <option>This year</option>
          </select>
        </div>
      </div>
      <div class="mt-4 overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="text-xs uppercase tracking-wider text-gray-500">
            <tr class="border-y border-gray-200 dark:border-gray-800">
              <th class="text-left p-3">Date</th>
              <th class="text-left p-3">Description</th>
              <th class="text-left p-3">Category</th>
              <th class="text-right p-3">Amount</th>
              <th class="text-right p-3">Status</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200 dark:divide-gray-800">
            <tr>
              <td class="p-3">2025-09-01</td>
              <td class="p-3">Supermarket</td>
              <td class="p-3"><span class="px-2 py-1 rounded-lg bg-primary-50 text-primary-700 dark:bg-primary-900/30 dark:text-primary-200">Groceries</span></td>
              <td class="p-3 text-right font-medium">-$54.23</td>
              <td class="p-3 text-right"><span class="px-2 py-1 rounded-lg bg-gray-100 dark:bg-gray-800">Cleared</span></td>
            </tr>
            <tr>
              <td class="p-3">2025-09-02</td>
              <td class="p-3">Salary</td>
              <td class="p-3"><span class="px-2 py-1 rounded-lg bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-200">Income</span></td>
              <td class="p-3 text-right font-medium text-green-600">+$1,250.00</td>
              <td class="p-3 text-right"><span class="px-2 py-1 rounded-lg bg-gray-100 dark:bg-gray-800">Cleared</span></td>
            </tr>
            <tr>
              <td class="p-3">2025-09-04</td>
              <td class="p-3">Coffee Shop</td>
              <td class="p-3"><span class="px-2 py-1 rounded-lg bg-pink-50 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200">Eating Out</span></td>
              <td class="p-3 text-right font-medium">-$6.20</td>
              <td class="p-3 text-right"><span class="px-2 py-1 rounded-lg bg-gray-100 dark:bg-gray-800">Pending</span></td>
            </tr>
            <tr>
              <td class="p-3">2025-09-07</td>
              <td class="p-3">Gas</td>
              <td class="p-3"><span class="px-2 py-1 rounded-lg bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200">Transport</span></td>
              <td class="p-3 text-right font-medium">-$32.00</td>
              <td class="p-3 text-right"><span class="px-2 py-1 rounded-lg bg-gray-100 dark:bg-gray-800">Cleared</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Quick Add -->
    <section class="p-4 rounded-2xl bg-gradient-to-br from-white to-gray-50 border border-gray-200 shadow-soft dark:from-gray-900/60 dark:to-gray-900/40 dark:border-gray-800">
      <div class="flex flex-col lg:flex-row lg:items-center gap-4">
        <div class="lg:w-1/2">
          <h3 class="font-semibold">Quick Add</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">Log a new expense with just a few details.</p>
        </div>
        <form class="lg:w-1/2 grid sm:grid-cols-2 gap-3">
          <input type="text" placeholder="Description" class="px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800" />
          <input type="number" step="0.01" placeholder="Amount" class="px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800" />
          <select class="px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800">
            <option>Groceries</option>
            <option>Transport</option>
            <option>Eating Out</option>
            <option>Entertainment</option>
          </select>
          <input type="date" class="px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800" />
          <button type="button" class="sm:col-span-2 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-primary-600 hover:bg-primary-700 text-white">
            <i data-lucide="save" class="w-5 h-5"></i>
            Save Expense
          </button>
        </form>
      </div>
    </section>
  </main>
</div>
{% endblock %}